{% extends "base.html" %}
{% load i18n static %}

{% block title %}{% trans "Canciones · Top 100" %}{% endblock %}
{% block nav_songs %}active{% endblock %}

{% block content %}
<section class="section">
  <div class="row">
    <div class="grow">
      <div class="kicker">{% trans "Listado" %}</div>
      <h1 class="title">{% trans "Todas las canciones" %}</h1>
      <p class="muted">
        {% trans "Haz clic en una fila para ver los detalles." %}
      </p>
    </div>

    {# Buscador dinámico #}
    <div class="chips">
      <input
        type="search"
        id="song-search"
        class="chip"
        placeholder="{% trans 'Buscar canciones...' %}"
        aria-label="{% trans 'Buscar canciones' %}"
      />
      <button id="song-search-clear" type="button" class="chip">
        {% trans "Limpiar filtro" %}
      </button>
    </div>
  </div>
</section>

<section class="section">
  <article class="card">
    <table class="table" role="table">
      <thead>
        <tr>
          <th>#</th>
          <th>{% trans "Título" %}</th>
          <th>{% trans "Estilo" %}</th>
          <th>{% trans "Intérpretes" %}</th>
          <th>{% trans "Acciones" %}</th>
        </tr>
      </thead>
      <tbody id="songs-table-body">
        {% for cancion in songs %}
        <tr class="song-row">
          <td>
            <span class="rank">#{{ forloop.counter }}</span>
          </td>
          <td>
            <a href="{% url 'songs:detail' pk=cancion.pk %}">
              {{ cancion.nombre }}
            </a>
          </td>
          <td>
            <a href="{% url 'genres:detail' pk=cancion.estilo.pk %}" class="badge">
              {{ cancion.estilo.nombre }}
            </a>
          </td>
          <td class="muted">
            {% for artista in cancion.artistas.all %}
              {{ artista.nombre }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
          </td>
          <td>
            <a class="btn ghost" href="{% url 'songs:detail' pk=cancion.pk %}">
              {% trans "Ver" %}
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="table-empty">
            {% trans "No hay canciones disponibles." %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </article>
</section>

{% include "includes/_pagination.html" %}
{% endblock %}

{% block extra_scripts %}
  <script src="{% static 'js/songs.js' %}"></script>
{% endblock %}
