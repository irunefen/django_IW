{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Inicio · Top 100" %}{% endblock %}
{% block nav_home %}active{% endblock %}

{% block content %}
<section class="hero">
  <div class="row">
    <div class="grow">
      <div class="kicker">{% trans "Bienvenido" %}</div>
      <h1 class="title">{% trans "Top 100 — Lo más escuchado por estilo" %}</h1>
      <p class="muted">
        {% trans "Se muestra una canción destacada por cada estilo musical" %}
      </p>
    </div>
    <a class="btn" href="{% url 'songs:list' %}">{% trans "Ver todas las canciones" %}</a>
  </div>
</section>

<section class="section grid cols-3">
  {% for estilo, cancion in destacados %}
  <article class="card">
    <div class="badge">
      {% trans "Estilo:" %} <strong>{{ estilo.nombre }}</strong>
    </div>
    <div class="cover">
      {% if cancion.album.imagen %}
      <img src="{{ cancion.album.imagen }}"
           alt="{% blocktrans with album_title=cancion.album.titulo %}Carátula de {{ album_title }}{% endblocktrans %}"
           loading="lazy">
      {% endif %}
    </div>

    {% if cancion %}
    <h3 class="title card-title-lg">{{ cancion.nombre }}</h3>
    <div class="muted">
      {% for artista in cancion.artistas.all %}
        {{ artista.nombre }}{% if not forloop.last %}, {% endif %}
      {% endfor %}
      · <span class="rank">#1</span>
      {% blocktrans with style_name=estilo.nombre %}
        en el ranking de {{ style_name }}
      {% endblocktrans %}
    </div>
    <div class="row mt-base">
      <a class="btn ghost" href="{% url 'genres:detail' pk=estilo.pk %}">{% trans "Ver estilo" %}</a>
      <a class="btn" href="{% url 'songs:detail' pk=cancion.pk %}">{% trans "Ver canción" %}</a>
    </div>

    {% else %}
    <h3 class="title card-title-lg">{% trans "Sin canciones" %}</h3>
    <div class="muted">
      {% trans "No hay canciones disponibles para este estilo." %}
    </div>
    <div class="row mt-base">
      <a class="btn ghost" href="{% url 'genres:detail' pk=estilo.pk %}">{% trans "Ver estilo" %}</a>
    </div>
    {% endif %}
  </article>

  {% empty %}
  <article class="card">
    <p class="muted">{% trans "No hay estilos disponibles." %}</p>
  </article>
  {% endfor %}
</section>

{% include "includes/_pagination.html" %}
{% endblock %}
